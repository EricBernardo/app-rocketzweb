{"remainingRequest":"/home/eric/code/app-rocketzweb/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/eric/code/app-rocketzweb/src/views/product/form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/eric/code/app-rocketzweb/src/views/product/form.vue","mtime":1558194430667},{"path":"/home/eric/code/app-rocketzweb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/eric/code/app-rocketzweb/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/eric/code/app-rocketzweb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/eric/code/app-rocketzweb/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { show, save } from \"@/api/product\";\nimport { getAllProductCategories } from \"@/api/product_category\";\n\nexport default {\n  data() {\n    return {\n      loading: false,\n      categories: [],\n      form: {\n        product_category_id: 0,\n        title: null,\n        price: 0\n      },\n      rules: {\n        product_category_id: [\n          {\n            required: true\n          }\n        ],\n        title: [\n          {\n            required: true\n          }\n        ],\n        price: [\n          {\n            required: true\n          }\n        ]\n      }\n    };\n  },\n  created() {\n    getAllProductCategories().then(response => {\n      this.categories = response.data.data;\n    });\n    if (this.$route.params.id) {\n      this.loading = true;\n      show(this.$route.params.id).then(response => {\n        Object.keys(this.form).forEach(key => {\n          this.form[key] = response.data.data[key];\n        });\n        this.loading = false;\n      });\n    }\n  },\n  methods: {\n    onSubmit(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          this.loading = true;\n          save(this.form, this.$route.params.id)\n            .then(response => {\n              this.$message({\n                message: \"Salvo com sucesso\",\n                type: \"success\",\n                duration: 5 * 1000\n              });\n              if (!this.$route.params.id) {\n                this.$refs[formName].resetFields();\n              }\n            })\n            .finally(responde => {\n              this.loading = false;\n            });\n        }\n      });\n    }\n  }\n};\n",null]}